<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.iamport.kr/v1/iamport.js"></script>
    <!--  axios cdn   -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.10.0/axios.min.js" integrity="sha512-WkZrEcQ5LMyNy6Y2PQf+Tu3vMcsmKKRKuPXtJSTHQJ3mpuvLRlA5dlDDhrrcXfyWr6Z/y3wIMfjfqVFO/gDZYQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
<h1>PORTONE INDEX PAGE</h1>

<a href="javascript:void(0)" class="cert-btn">인증하기</a>
<hr/>
<a href="javascript:void(0)" class="pay-btn">결제하기</a>

<script src="https://cdn.iamport.kr/v1/iamport.js"></script>
<script>
    IMP.init("-");

    const certBtn = document.querySelector('.cert-btn');
    certBtn.addEventListener('click',()=>{
        console.log('certBtn clicked...');

        const date = new Date();

        IMP.certification({
            channelKey: "channel-key-46e93c96-d412-4f15-801d-3e28ed701185",
            merchant_uid: "test_"+date.toString(),
        }, function (resp){
            console.log(resp);
            const imp_uid = resp.imp_uid;
            //비동기 요청(axios)
            axios.get("/portOne/certifications/"+imp_uid)
            .then((resp_2)=>{
                console.log("사용자 정보 조회" , resp_2)
            })
            .error(()=>{})
        });

    })
    //
    const payBtn = document.querySelector('.pay-btn');
    payBtn.addEventListener('click',()=>{

      const date = new Date();
      const timeStamp = date.getTime();
      console.log('timeStamp',timeStamp)
      IMP.request_pay({
        channelKey: "channel-key-82dbb01f-bf35-4e07-b6ca-4522bbd5d04f",
        pay_method: "card",
        merchant_uid: "test_"+timeStamp,
        name: "초코파이",
        amount: 500,
        buyer_tel: "010-0000-0000",
      });

    })
</script>

<script>





</script>
</body>
</html>